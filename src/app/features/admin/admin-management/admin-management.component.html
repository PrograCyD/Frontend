<div class="admin-management-container">
  <header class="header">
    <h1>‚öôÔ∏è Panel de Administraci√≥n</h1>
    <p class="subtitle">Gestiona pel√≠culas, calificaciones y base de datos</p>
  </header>

  <!-- Tabs -->
  <div class="tabs">
    <button
      class="tab-button"
      [class.active]="activeTab() === 'movies'"
      (click)="setActiveTab('movies')">
      üé¨ Pel√≠culas
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab() === 'ratings'"
      (click)="setActiveTab('ratings')">
      ‚≠ê Calificaciones
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab() === 'requests'"
      (click)="setActiveTab('requests')">
      üì• Solicitudes
      @if (pendingRequestsCount() > 0) {
        <span class="badge">{{ pendingRequestsCount() }}</span>
      }
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab() === 'remap'"
      (click)="setActiveTab('remap')">
      üóÑÔ∏è Remapeo BD
    </button>
  </div>

  <!-- MOVIES TAB -->
  @if (activeTab() === 'movies') {
    <div class="tab-content">
      <div class="section-header">
        <h2>Gesti√≥n de Pel√≠culas</h2>
        <button class="btn-primary" (click)="openAddMovieForm()">
          ‚ûï Agregar Pel√≠cula
        </button>
      </div>

      <!-- Filters -->
      <div class="filters-card">
        <div class="filter-grid">
          <div class="filter-group">
            <label>Buscar</label>
            <input
              type="text"
              [(ngModel)]="moviesFilters().search"
              (ngModelChange)="onMoviesFilterChange()"
              class="form-control"
              placeholder="Buscar por t√≠tulo...">
          </div>
          <div class="filter-group">
            <label>G√©nero</label>
            <select
              [(ngModel)]="moviesFilters().genre"
              (ngModelChange)="onMoviesFilterChange()"
              class="form-control">
              <option value="">Todos</option>
              @for (genre of availableGenres; track genre) {
                <option [value]="genre">{{ genre }}</option>
              }
            </select>
          </div>
          <div class="filter-group">
            <label>Ordenar por</label>
            <select
              [(ngModel)]="moviesFilters().sortBy"
              (ngModelChange)="onMoviesFilterChange()"
              class="form-control">
              <option value="title">T√≠tulo</option>
              <option value="year">A√±o</option>
              <option value="rating">Rating</option>
              <option value="popularity">Popularidad</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Orden</label>
            <select
              [(ngModel)]="moviesFilters().sortOrder"
              (ngModelChange)="onMoviesFilterChange()"
              class="form-control">
              <option value="asc">Ascendente</option>
              <option value="desc">Descendente</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Movie Form -->
      @if (showMovieForm()) {
        <div class="form-modal-overlay" (click)="showMovieForm.set(false)">
          <div class="form-modal" (click)="$event.stopPropagation()">
            <h3>{{ isEditingMovie() ? 'Editar Pel√≠cula' : 'Agregar Nueva Pel√≠cula' }}</h3>

            <form (ngSubmit)="submitMovieForm()">
              <div class="form-scroll">
                <div class="form-group">
                  <label>T√≠tulo *</label>
                  <input
                    type="text"
                    [(ngModel)]="movieForm().title"
                    name="title"
                    class="form-control"
                    placeholder="T√≠tulo de la pel√≠cula"
                    required>
                </div>

                <div class="form-group">
                  <label>A√±o *</label>
                  <input
                    type="number"
                    [(ngModel)]="movieForm().year"
                    name="year"
                    class="form-control"
                    min="1800"
                    [max]="2100"
                    required>
                </div>

                <div class="form-group">
                  <label>G√©neros * (Selecciona al menos uno)</label>
                  <div class="genres-grid">
                    @for (genre of availableGenres; track genre) {
                      <label class="genre-checkbox">
                        <input
                          type="checkbox"
                          [checked]="movieForm().genres.includes(genre)"
                          (change)="toggleMovieGenre(genre)">
                        <span>{{ genre }}</span>
                      </label>
                    }
                  </div>
                </div>

                <div class="form-section">
                  <h4>Enlaces Externos</h4>
                  <div class="form-group">
                    <label>MovieLens Link</label>
                    <input
                      type="text"
                      [(ngModel)]="movieForm().movieLensLink"
                      name="movieLensLink"
                      class="form-control"
                      placeholder="https://movielens.org/movies/...">
                  </div>
                  <div class="form-group">
                    <label>IMDB Link</label>
                    <input
                      type="text"
                      [(ngModel)]="movieForm().imdbLink"
                      name="imdbLink"
                      class="form-control"
                      placeholder="https://www.imdb.com/title/tt...">
                  </div>
                  <div class="form-group">
                    <label>TMDB Link</label>
                    <input
                      type="text"
                      [(ngModel)]="movieForm().tmdbLink"
                      name="tmdbLink"
                      class="form-control"
                      placeholder="https://www.themoviedb.org/movie/...">
                  </div>
                </div>

                <div class="form-section">
                  <h4>Tags</h4>
                  <div class="form-group">
                    <label>Genome Tags (separados por comas)</label>
                    <input
                      type="text"
                      [(ngModel)]="movieForm().genomeTags"
                      name="genomeTags"
                      class="form-control"
                      placeholder="action, thriller, suspense">
                  </div>
                  <div class="form-group">
                    <label>User Tags (separados por comas)</label>
                    <input
                      type="text"
                      [(ngModel)]="movieForm().userTags"
                      name="userTags"
                      class="form-control"
                      placeholder="must watch, award winner">
                  </div>
                </div>

                <div class="form-section">
                  <h4>Importar Datos (Opcional)</h4>
                  <div class="form-group">
                    <label>API Link de TMDB</label>
                    <input
                      type="text"
                      [(ngModel)]="movieForm().apiLink"
                      name="apiLink"
                      class="form-control"
                      placeholder="https://api.themoviedb.org/3/movie/...">
                    <small>Para extraer autom√°ticamente la informaci√≥n de la pel√≠cula</small>
                  </div>
                  <div class="form-group">
                    <label>O importar JSON directamente</label>
                    <textarea
                      [(ngModel)]="movieForm().jsonData"
                      name="jsonData"
                      class="form-control"
                      rows="6"
                      placeholder='{"title": "Movie Name", "year": 2024, ...}'></textarea>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary" (click)="showMovieForm.set(false)">
                  Cancelar
                </button>
                <button type="submit" class="btn-primary" [disabled]="isSubmitting()">
                  {{ isSubmitting() ? 'Guardando...' : 'Guardar' }}
                </button>
              </div>
            </form>
          </div>
        </div>
      }

      <!-- Movies Table -->
      @if (isLoadingMovies()) {
        <div class="loading">Cargando pel√≠culas...</div>
      } @else {
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>T√≠tulo</th>
                <th>A√±o</th>
                <th>G√©neros</th>
                <th>Rating</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              @for (movie of movies(); track movie.movieId) {
                <tr>
                  <td>{{ movie.movieId }}</td>
                  <td>
                    <div class="movie-cell">
                      @if (movie.externalData?.posterUrl) {
                        <img [src]="movie.externalData!.posterUrl" [alt]="movie.title" class="mini-poster">
                      }
                      <span>{{ movie.title }}</span>
                    </div>
                  </td>
                  <td>{{ movie.year || 'N/A' }}</td>
                  <td>
                    <div class="genres-cell">
                      @for (genre of movie.genres.slice(0, 2); track genre) {
                        <span class="genre-tag">{{ genre }}</span>
                      }
                    </div>
                  </td>
                  <td>{{ movie.ratingStats?.average?.toFixed(1) || 'N/A' }}</td>
                  <td>
                    <div class="actions-cell">
                      <button class="btn-small btn-edit" (click)="openEditMovieForm(movie)">
                        ‚úèÔ∏è
                      </button>
                      <button class="btn-small btn-delete" (click)="deleteMovie(movie.movieId, movie.title)">
                        üóëÔ∏è
                      </button>
                    </div>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="pagination">
          <button
            class="btn-pagination"
            (click)="previousMoviesPage()"
            [disabled]="moviesPage() === 0">
            ‚Üê Anterior
          </button>
          <span class="pagination-info">
            P√°gina {{ moviesPage() + 1 }} de {{ moviesTotalPages() }} ({{ moviesTotal() }} total)
          </span>
          <button
            class="btn-pagination"
            (click)="nextMoviesPage()"
            [disabled]="moviesPage() >= moviesTotalPages() - 1">
            Siguiente ‚Üí
          </button>
        </div>
      }
    </div>
  }

  <!-- RATINGS TAB -->
  @if (activeTab() === 'ratings') {
    <div class="tab-content">
      <div class="section-header">
        <h2>Gesti√≥n de Calificaciones</h2>
        <button class="btn-primary" (click)="openAddRatingForm()">
          ‚ûï Agregar Calificaci√≥n
        </button>
      </div>

      <!-- Filters -->
      <div class="filters-card">
        <div class="filter-grid">
          <div class="filter-group">
            <label>Usuario</label>
            <select
              [(ngModel)]="ratingsFilters().userId"
              (ngModelChange)="onRatingsFilterChange()"
              class="form-control">
              <option [value]="undefined">Todos</option>
              @for (user of availableUsers; track user.userId) {
                <option [value]="user.userId">{{ user.firstName }} {{ user.lastName }}</option>
              }
            </select>
          </div>
          <div class="filter-group">
            <label>Pel√≠cula</label>
            <select
              [(ngModel)]="ratingsFilters().movieId"
              (ngModelChange)="onRatingsFilterChange()"
              class="form-control">
              <option [value]="undefined">Todas</option>
              @for (movie of availableMovies().slice(0, 50); track movie.movieId) {
                <option [value]="movie.movieId">{{ movie.title }}</option>
              }
            </select>
          </div>
          <div class="filter-group">
            <label>Rating m√≠nimo</label>
            <select
              [(ngModel)]="ratingsFilters().minRating"
              (ngModelChange)="onRatingsFilterChange()"
              class="form-control">
              <option [value]="0">Todos</option>
              <option [value]="1">‚≠ê 1+</option>
              <option [value]="2">‚≠ê 2+</option>
              <option [value]="3">‚≠ê 3+</option>
              <option [value]="4">‚≠ê 4+</option>
              <option [value]="5">‚≠ê 5</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Rating Form -->
      @if (showRatingForm()) {
        <div class="form-modal-overlay" (click)="showRatingForm.set(false)">
          <div class="form-modal small" (click)="$event.stopPropagation()">
            <h3>{{ isEditingRating() ? 'Editar Calificaci√≥n' : 'Agregar Calificaci√≥n' }}</h3>

            <form (ngSubmit)="submitRatingForm()">
              <div class="form-group">
                <label>Usuario *</label>
                <select
                  [(ngModel)]="ratingForm().userId"
                  name="userId"
                  class="form-control"
                  [disabled]="isEditingRating()"
                  required>
                  @for (user of availableUsers; track user.userId) {
                    <option [value]="user.userId">{{ user.firstName }} {{ user.lastName }}</option>
                  }
                </select>
              </div>

              <div class="form-group">
                <label>Pel√≠cula *</label>
                <select
                  [(ngModel)]="ratingForm().movieId"
                  name="movieId"
                  class="form-control"
                  [disabled]="isEditingRating()"
                  required>
                  @for (movie of availableMovies(); track movie.movieId) {
                    <option [value]="movie.movieId">{{ movie.title }}</option>
                  }
                </select>
              </div>

              <div class="form-group">
                <label>Calificaci√≥n * (0.5 - 5.0)</label>
                <input
                  type="number"
                  [(ngModel)]="ratingForm().rating"
                  name="rating"
                  class="form-control"
                  min="0.5"
                  max="5"
                  step="0.5"
                  required>
                <div class="rating-preview">
                  <app-star-rating [rating]="ratingForm().rating"></app-star-rating>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn-secondary" (click)="showRatingForm.set(false)">
                  Cancelar
                </button>
                <button type="submit" class="btn-primary" [disabled]="isSubmitting()">
                  {{ isSubmitting() ? 'Guardando...' : 'Guardar' }}
                </button>
              </div>
            </form>
          </div>
        </div>
      }

      <!-- Ratings Table -->
      @if (isLoadingRatings()) {
        <div class="loading">Cargando calificaciones...</div>
      } @else {
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>Usuario</th>
                <th>Pel√≠cula</th>
                <th>Calificaci√≥n</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              @for (rating of ratings(); track rating.userId + '-' + rating.movieId) {
                <tr>
                  <td>{{ rating.userName || getUserName(rating.userId) }}</td>
                  <td>{{ rating.movieTitle || getMovieTitle(rating.movieId) }}</td>
                  <td>
                    <app-star-rating [rating]="rating.rating"></app-star-rating>
                  </td>
                  <td>{{ formatDate(rating.timestamp) }}</td>
                  <td>
                    <div class="actions-cell">
                      <button class="btn-small btn-edit" (click)="openEditRatingForm(rating)">
                        ‚úèÔ∏è
                      </button>
                      <button
                        class="btn-small btn-delete"
                        (click)="deleteRating(rating.userId, rating.movieId, rating.userName || getUserName(rating.userId), rating.movieTitle || getMovieTitle(rating.movieId))">
                        üóëÔ∏è
                      </button>
                    </div>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="pagination">
          <button
            class="btn-pagination"
            (click)="previousRatingsPage()"
            [disabled]="ratingsPage() === 0">
            ‚Üê Anterior
          </button>
          <span class="pagination-info">
            P√°gina {{ ratingsPage() + 1 }} de {{ ratingsTotalPages() }} ({{ ratingsTotal() }} total)
          </span>
          <button
            class="btn-pagination"
            (click)="nextRatingsPage()"
            [disabled]="ratingsPage() >= ratingsTotalPages() - 1">
            Siguiente ‚Üí
          </button>
        </div>
      }
    </div>
  }

  <!-- REQUESTS TAB -->
  @if (activeTab() === 'requests') {
    <div class="tab-content">
      <h2>üìã Gesti√≥n de Solicitudes</h2>

      <!-- Filters -->
      <div class="requests-filters">
        <button
          [class.active]="requestsFilter() === 'pending'"
          (click)="setRequestsFilter('pending')">
          ‚è≥ Pendientes
          @if (pendingRequestsCount() > 0) {
            <span class="badge">{{ pendingRequestsCount() }}</span>
          }
        </button>
        <button
          [class.active]="requestsFilter() === 'approved'"
          (click)="setRequestsFilter('approved')">
          ‚úÖ Aprobadas
        </button>
        <button
          [class.active]="requestsFilter() === 'rejected'"
          (click)="setRequestsFilter('rejected')">
          ‚ùå Rechazadas
        </button>
        <button
          [class.active]="requestsFilter() === 'all'"
          (click)="setRequestsFilter('all')">
          üìä Todas
        </button>
      </div>

      <!-- Requests Table -->
      @if (filteredRequests().length > 0) {
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Usuario</th>
                <th>Tipo</th>
                <th>Pel√≠cula</th>
                <th>Estado</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              @for (request of filteredRequests(); track request.requestId) {
                <tr>
                  <td>{{ request.requestId }}</td>
                  <td>
                    <div class="user-info">
                      <strong>ID: {{ request.userId }}</strong>
                    </div>
                  </td>
                  <td>
                    <span [class]="'request-type ' + request.requestType">
                      {{ request.requestType === 'add' ? '‚ûï Agregar' : '‚úèÔ∏è Editar' }}
                    </span>
                  </td>
                  <td>
                    <div class="movie-info">
                      <strong>{{ request.movieData.title }}</strong>
                      @if (request.movieData.year) {
                        <span class="year">({{ request.movieData.year }})</span>
                      }
                      @if (request.movieData.genres && request.movieData.genres.length > 0) {
                        <div class="genres-mini">
                          {{ request.movieData.genres.slice(0, 2).join(', ') }}
                          @if (request.movieData.genres.length > 2) {
                            <span>+{{ request.movieData.genres.length - 2 }}</span>
                          }
                        </div>
                      }
                    </div>
                  </td>
                  <td>
                    <span [class]="'status-badge ' + request.status">
                      @if (request.status === 'pending') { ‚è≥ Pendiente }
                      @if (request.status === 'approved') { ‚úÖ Aprobada }
                      @if (request.status === 'rejected') { ‚ùå Rechazada }
                    </span>
                  </td>
                  <td>
                    <div class="date-info">
                      <div>{{ request.createdAt | date:'short' }}</div>
                      @if (request.updatedAt && request.updatedAt !== request.createdAt) {
                        <small>Actualizada: {{ request.updatedAt | date:'short' }}</small>
                      }
                    </div>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button
                        class="btn-view"
                        (click)="viewRequestDetails(request)"
                        title="Ver detalles">
                        üëÅÔ∏è Ver
                      </button>
                      @if (request.status === 'pending') {
                        <button
                          class="btn-approve"
                          (click)="approveRequest(request)"
                          title="Aprobar solicitud">
                          ‚úÖ
                        </button>
                        <button
                          class="btn-reject"
                          (click)="rejectRequest(request)"
                          title="Rechazar solicitud">
                          ‚ùå
                        </button>
                      }
                    </div>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      } @else {
        <div class="empty-state">
          <p>üì≠ No hay solicitudes {{ requestsFilter() === 'all' ? '' : requestsFilter() === 'pending' ? 'pendientes' : requestsFilter() === 'approved' ? 'aprobadas' : 'rechazadas' }}</p>
        </div>
      }
    </div>
  }

  <!-- Request Details Modal -->
  @if (showRequestDetails() && selectedRequest()) {
    <div class="modal-overlay" (click)="closeRequestDetails()">
      <div class="modal-content request-details" (click)="$event.stopPropagation()">
        <button class="modal-close" (click)="closeRequestDetails()">‚úï</button>

        <h2>Detalles de la Solicitud</h2>

        <div class="request-detail-section">
          <h3>üìã Informaci√≥n General</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <strong>ID:</strong>
              <span>{{ selectedRequest()!.requestId }}</span>
            </div>
            <div class="detail-item">
              <strong>Usuario ID:</strong>
              <span>{{ selectedRequest()!.userId }}</span>
            </div>
            <div class="detail-item">
              <strong>Tipo:</strong>
              <span>{{ selectedRequest()!.requestType === 'add' ? 'Agregar pel√≠cula' : 'Editar pel√≠cula' }}</span>
            </div>
            <div class="detail-item">
              <strong>Estado:</strong>
              <span [class]="'status-badge ' + selectedRequest()!.status">
                {{ selectedRequest()!.status === 'pending' ? '‚è≥ Pendiente' : selectedRequest()!.status === 'approved' ? '‚úÖ Aprobada' : '‚ùå Rechazada' }}
              </span>
            </div>
            <div class="detail-item">
              <strong>Creada:</strong>
              <span>{{ selectedRequest()!.createdAt | date:'medium' }}</span>
            </div>
            @if (selectedRequest()!.updatedAt && selectedRequest()!.updatedAt !== selectedRequest()!.createdAt) {
              <div class="detail-item">
                <strong>Actualizada:</strong>
                <span>{{ selectedRequest()!.updatedAt | date:'medium' }}</span>
              </div>
            }
            @if (selectedRequest()!.reviewedBy) {
              <div class="detail-item">
                <strong>Revisada por:</strong>
                <span>Admin ID {{ selectedRequest()!.reviewedBy }}</span>
              </div>
            }
          </div>
        </div>

        <div class="request-detail-section">
          <h3>üé¨ Datos de la Pel√≠cula</h3>
          <div class="movie-detail-grid">
            <div class="detail-item full-width">
              <strong>T√≠tulo:</strong>
              <span>{{ selectedRequest()!.movieData.title }}</span>
            </div>
            @if (selectedRequest()!.movieData.year) {
              <div class="detail-item">
                <strong>A√±o:</strong>
                <span>{{ selectedRequest()!.movieData.year }}</span>
              </div>
            }
            @if (selectedRequest()!.movieData.genres && selectedRequest()!.movieData.genres!.length > 0) {
              <div class="detail-item full-width">
                <strong>G√©neros:</strong>
                <span>{{ selectedRequest()!.movieData.genres!.join(', ') }}</span>
              </div>
            }
            @if (selectedRequest()!.movieData.links.tmdb) {
              <div class="detail-item">
                <strong>TMDB ID:</strong>
                <span>{{ selectedRequest()!.movieData.links.tmdb }}</span>
              </div>
            }
            @if (selectedRequest()!.movieData.links.imdb) {
              <div class="detail-item">
                <strong>IMDB ID:</strong>
                <span>{{ selectedRequest()!.movieData.links.imdb }}</span>
              </div>
            }
          </div>
        </div>

        @if (selectedRequest()!.reviewNote) {
          <div class="request-detail-section">
            <h3>üí¨ Nota de Revisi√≥n</h3>
            <p class="review-note">{{ selectedRequest()!.reviewNote }}</p>
          </div>
        }

        @if (selectedRequest()!.status === 'pending') {
          <div class="request-detail-section">
            <h3>‚úçÔ∏è Nota de Revisi√≥n (Opcional)</h3>
            <textarea
              [(ngModel)]="reviewNote"
              placeholder="Agregar nota de revisi√≥n..."
              rows="3"
              class="review-note-input"></textarea>
          </div>

          <div class="modal-actions">
            <button class="btn-approve-large" (click)="approveRequest(selectedRequest()!)">
              ‚úÖ Aprobar Solicitud
            </button>
            <button class="btn-reject-large" (click)="rejectRequest(selectedRequest()!)">
              ‚ùå Rechazar Solicitud
            </button>
          </div>
        }
      </div>
    </div>
  }

  <!-- REMAP TAB -->
  @if (activeTab() === 'remap') {
    <div class="tab-content">
      <div class="remap-container">
        <h2>üóÑÔ∏è Remapeo de Base de Datos</h2>

        <div class="remap-info">
          <h3>¬øQu√© hace el remapeo?</h3>
          <ul>
            <li>Reorganiza y optimiza los √≠ndices de la base de datos</li>
            <li>Recalcula las similitudes entre pel√≠culas</li>
            <li>Actualiza las estad√≠sticas de calificaciones</li>
            <li>Limpia datos inconsistentes o hu√©rfanos</li>
          </ul>

          <div class="warning-box">
            <strong>‚ö†Ô∏è Advertencia:</strong>
            <p>Este proceso puede tardar varios minutos dependiendo del tama√±o de la base de datos. Durante el remapeo, el sistema puede experimentar lentitud.</p>
          </div>
        </div>

        @if (!remapResult()) {
          <div class="remap-action">
            <button
              class="btn-danger"
              (click)="confirmRemap()"
              [disabled]="isRemapping()">
              {{ isRemapping() ? '‚è≥ Remapeando...' : 'üîÑ Iniciar Remapeo' }}
            </button>
          </div>
        }

        @if (isRemapping()) {
          <div class="remap-progress">
            <div class="spinner"></div>
            <p>Remapeando base de datos... Por favor espera.</p>
          </div>
        }

        @if (remapResult()) {
          <div class="remap-result" [class.success]="remapResult()!.success" [class.error]="!remapResult()!.success">
            <h3>{{ remapResult()!.success ? '‚úÖ Remapeo Exitoso' : '‚ùå Error en Remapeo' }}</h3>
            <p>{{ remapResult()!.message }}</p>

            @if (remapResult()!.affectedMovies !== undefined) {
              <div class="result-stats">
                <div class="stat">
                  <span class="label">Pel√≠culas afectadas:</span>
                  <span class="value">{{ remapResult()!.affectedMovies }}</span>
                </div>
                <div class="stat">
                  <span class="label">Calificaciones afectadas:</span>
                  <span class="value">{{ remapResult()!.affectedRatings }}</span>
                </div>
                <div class="stat">
                  <span class="label">Duraci√≥n:</span>
                  <span class="value">{{ remapResult()!.duration! / 1000 }} segundos</span>
                </div>
              </div>
            }

            <button class="btn-primary" (click)="remapResult.set(null)">
              Realizar Otro Remapeo
            </button>
          </div>
        }
      </div>
    </div>
  }
</div>
